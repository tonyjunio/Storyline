@using Storyline.WebApp.Common;
@code {

    [Parameter]
    public IEnumerable<Models.Storyline.StoryEvent> StoryEvents { get; set; }

    [Parameter]
    public Models.Storyline.StoryEvent SelectedStoryEvent { get; set; } = null;

    [Parameter]
    public EventCallback<Models.Storyline.StoryEvent> OnStoryEventSelect { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
    }

    protected void SelectStoryEvent(Models.Storyline.StoryEvent item)
    {
        this.SelectedStoryEvent = item;
        this.OnStoryEventSelect.InvokeAsync(item);
    }
}

<div class="event-timeline-selector hide-date">
    @foreach (var e in this.StoryEvents)
    {
        string selectedItemClass = this.SelectedStoryEvent?.Id == e.Id ? "selected" : "";

        <div class="event-item @selectedItemClass" @onclick="() => SelectStoryEvent(e)" title="@e.Title">
            <i id="@e.Id"></i>
            <div>@Helper.DateHelper.TimeLineInfo(e.EventTimeStart, null, isShort: false)</div>
        </div>
    }
</div>


<style>
    .event-timeline-selector {
        margin: 10px 0;
        display: flex;
        flex-flow: column wrap;
        width: 200px;
    }

        .event-timeline-selector .event-item {
            align-items: center;
            cursor: pointer;
            display: flex;
            height: 50px;
            justify-content: left;
        }

            .event-timeline-selector .event-item > i {
                background-color: #e4e4e4;
                border: 2px solid #000;
                border-radius: 5px;
                display: inline-block;
                height: 20px;
                margin: 0 15px 0 0;
                position: relative;
                width: 20px;
            }

            .event-timeline-selector .event-item > div {
                flex-grow: 1;
            }

            .event-timeline-selector .event-item:hover i, .event-timeline-selector .event-item.selected > i {
                background-color: #20acb4;
                border-color: #02161a;
                height: 25px;
                transform: rotate(45deg);
                width: 25px;
            }

            .event-timeline-selector .event-item.selected > i {
                background-color: #8b7e50;
                border-color: #8b7e50;
            }

        .event-timeline-selector.hide-date {
            width: auto !important;
        }

            .event-timeline-selector.hide-date .event-item  {
                justify-content: center;
            }

            .event-timeline-selector.hide-date .event-item > i {
                margin: 0;
            }

            .event-timeline-selector.hide-date .event-item > div {
                display: none;
            }
</style>