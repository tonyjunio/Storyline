@using Storyline.WebApp.Common;
@code {

    [Parameter]
    public Models.Storyline.StoryEvent StoryEvent { get; set; }


    protected override void OnInitialized()
    {
        base.OnInitialized();
    }
}

@if (this.StoryEvent is not null)
{
    var item = this.StoryEvent;
    <div class="event-details">
        <div class="summary rad-mask event-bg" style="background-image: var(--summary-radial-gradient), var(--summary-linear-gradient), url('@item.Image');">
            <div>
                <h3>
                    @item.Title
                    <span class="event-date">@Helper.DateHelper.TimeLineInfo(this.StoryEvent.EventTimeStart, this.StoryEvent.EventTimeEnd) / @this.StoryEvent.Location</span>
                </h3>
                <div>@((MarkupString)item.Summary)</div>
                <a class="wiki-link" href="@this.StoryEvent.Wiki" target="_blank">Read More</a>
            </div>
        </div>
        <div class="moreinfo">
            <div>
                @if (item.Characters?.Any() ?? false)
                {
                    <h5>Characters</h5>
                    <ul class="ref-list">
                        @foreach (var i in item.Characters)
                        {
                            <li class="ref-bg" style="background-image: var(--moreinfo-gradient), url('@i.Image');">
                                <a href="@i.Wiki" target="_blank">@i.Name</a>
                            </li>
                        }
                    </ul>
                }

                @if (item.Organizations?.Any() ?? false)
                {
                    <h5>Organizations</h5>
                    <ul class="ref-list">
                        @foreach (var i in item.Organizations)
                        {
                            <li class="ref-bg" style="background-image: var(--moreinfo-gradient), url('@i.Image');">
                                <a href="@i.Wiki" target="_blank">@i.Name</a>
                            </li>
                        }
                    </ul>
                }

                @if (item.Viruses?.Any() ?? false)
                {
                    <h5>Viruses</h5>
                    <ul class="ref-list">
                        @foreach (var i in item.Viruses)
                        {
                            <li class="ref-bg" style="background-image: var(--moreinfo-gradient), url('@i.Image');">
                                <a href="@i.Wiki" target="_blank">@i.Name</a>
                            </li>
                        }
                    </ul>
                }

                @if (item.Games?.Any() ?? false)
                {
                    <h5>Games</h5>
                    <ul class="ref-list">
                        @foreach (var i in item.Games)
                        {
                            <li class="ref-bg" style="background-image: var(--moreinfo-gradient), url('@i.Image');">
                                <a href="@i.Wiki" target="_blank">@i.Title</a>
                            </li>
                        }
                    </ul>
                }

                @if (item.Movies?.Any() ?? false)
                {
                    <h5>Movies</h5>
                    <ul class="ref-list">
                        @foreach (var i in item.Movies)
                        {
                            <li class="ref-bg" style="background-image: var(--moreinfo-gradient), url('@i.Image');">
                                <a href="@i.Wiki" target="_blank">@i.Title</a>
                            </li>
                        }
                    </ul>
                }
            </div>
        </div>
    </div>
}
else
{
    <div>?</div>
}


<style>
    :root {
        --moreinfo-gradient: linear-gradient(to bottom, #00000045, #413b2796);
        --summary-radial-gradient: radial-gradient(circle, transparent 40%, #000000 70%);
        --summary-linear-gradient: linear-gradient(to right, #000000, grey);
        --summary-linear-gradient2: linear-gradient(to bottom, #000000c7, #00000036);
    }

    @@keyframes topToBottom {
        from {
            top: -20%;
        }
        to {
            top: 0%;
        }
    }

    @@keyframes leftToRight {
        from {
            left: -20%;
        }

        to {
            left: 0%;
        }
    }

    .event-bg {
        background-blend-mode: var(--blend-top, normal), var(--blend-bottom, saturation), normal;
        background-position: center 75px;
        background-repeat: no-repeat;
        background-size: cover;
        --color-v: black;
        --color: grey;
    }

    .rad-mask {
        -webkit-mask: radial-gradient(circle, #000000ba 1px, rgb(0 0 0 / 88%) 160px);
        backdrop-filter: blur(5px);
    }

    .event-details {
        align-items: stretch;
        display: flex;
        flex-flow: row nowrap;
        justify-content: center;
        height: 100%;
        width: 100%;
    }

        .event-details .summary {
            background-color: #00000036;
            border-left: 1px solid #3b3b3b;
            border-right: 1px solid #3b3b3b;
            border-radius: 2px;
            box-shadow: 4px 0px 16px -8px #000;
            font-size: 1.1rem;
            position: relative;
            width: 40%;
        }

        .event-details .summary > div {
            animation: 0.7s ease-out 1 topToBottom;
            position: relative;
        }

            .event-details .summary .event-date {
                color: #ffffff;
                display: block;
                font-size: 1rem;
                font-weight: 500;
                font-variant: small-caps;
                margin: 10px 0;
            }

            .event-details .summary .wiki-link {
                background: #20acb4;
                border-radius: 2px;
                color: black;
                font-size: 0.8rem;
                font-weight: 500;
                margin: 10px;
                padding: 3px 6px;
                text-decoration: none;
            }

                .event-details .summary .wiki-link:hover {
                    background: #9b8c58;
                }

            .event-details .summary h3 {
                border-bottom: 1px solid #393939;
                color: #20acb4;
                font-weight: 400;
                margin: 0;
                padding: 10px;
            }

            .event-details .summary > div > div {
                background: var(--summary-linear-gradient2);
                padding: 10px;
            }

        .event-details .moreinfo {
            overflow: hidden;
            padding-left: 10px;
            position: relative;
            width: 60%;
        }

            .event-details .moreinfo > div {
                animation: 0.7s ease-out 1 leftToRight;
                position: relative;
            }

            .event-details .moreinfo h5 {
                color: #8b7e50;
                font-weight: 400;
                padding: 10px 0 0;
            }

    .ref-list {
        align-items: center;
        display: flex;
        flex-flow: row wrap;
        justify-content: left;
        list-style: none;
        margin: : 0;
        padding: 0;
    }

        .ref-list > li {
            align-items: end;
            border: 1px solid #453f29;
            border-left-width: 8px;
            border-radius: 5px 2px 5px 2px;
            display: flex;
            font-weight: 500;
            justify-content: center;
            margin: 5px;
            min-height: 150px;
            width: 120px;
        }

            .ref-list > li > a {
                color: white;
                display: block;
                font-weight: 500;
                padding: 5px 2px;
                text-align: center;
                text-decoration: none;
                width: 100%;
            }

    .ref-bg {
        background-position: center top;
        background-repeat: no-repeat;
        background-size: cover;
    }

    .ref-list > li > a:hover {
        color: #20acb4;
    }

    .ref-list > li:hover > a {
    }
</style>